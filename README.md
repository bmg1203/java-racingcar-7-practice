# java-racingcar-precourse

# 학습 목표
+ 여러 역할을 수행하는 큰 함수를 단일 역할을 수행하는 작은 함수로 분리한다.
  + [ ] service 와 domain 역할 명확하게 구분하기
  + [ ] controller 역할 명확하게 구분하기
+ 테스트 도구를 사용하는 방법을 배우고 프로그램이 제대로 작동하는지 테스트한다.
  + [ ] TDD 적용해보기
+ 1주 차 공통 피드백을 최대한 반영한다.
  + [ ] 요구사항 정확하게 준수하기
    + [ ] indent depth를 3이 넘지 않게 구현할 것.
    + [ ] 3항 연산자를 사용하지 않는다.
  + [ ] Git으로 관리할 자원 고려하기
  + [ ] 커밋 메시지를 의미있게 작성하기
  + [ ] 클래스와 메서드 이름을 한 두 단어로 유지하려고 노력하기


## 요구사항 분석
> 초간단 자동차 경주 게임을 구현한다.

### 기능 요구 사항
+ **주어진 횟수 동안 n대의 자동차는 전진 또는 멈출 수 있다.**
  + 횟수가 주어진다.
  + 자동차는 n대가 있다.
  + 자동차는 전진, 혹은 멈추는 상태를 가진다.
+ **각 자동차에 이름을 부여할 수 있다. 전진하는 자동차를 출력할 때 자동차 이름을 같이 출력한다.**
  + 각 자동차는 이름을 가지고 있다.
  + 자동차를 출력할 때는 이름이 같이 출력되어야 한다.
+ **자동차 이름은 쉼표(,)를 기준으로 구분하며 이름은 5자 이하만 가능하다.**
  + `,` 쉼표를 기준으로 구분이 된다.
  + 자동차 이름은 5자 이하만 가능하다.
+ **사용자는 몇 번의 이동을 할 것인지를 입력할 수 있어야 한다.**
  + 이동 횟수는 사용자가 정한다.
+ **전진하는 조건은 0에서 9 사이에서 무작위 값을 구한 후 무작위 값이 4 이상일 경우이다.**
  + 전진은 무작위 값에 의해서 정해진다.
  + 무작위 값이 `4` 이상일 경우 전진한다.
  + 무작위 값이 `4` 미만일 경우 정지한다.
+ **자동차 경주 게임을 완료한 후 누가 우승했는지를 알려준다. 우승자는 한 명 이상일 수 있다.**
  + 경주가 종료 되면 우승자를 출력한다.
  + 우승자는 다수 일 수 있다.
    + 같은 이름을 가진 자동차의 처리
+ **우승자가 여러 명일 경우 쉼표(,)를 이용하여 구분한다.**
  + 우승자가 한 명일 경우 쉼표를 출력하지 않는다. 
  + 우승자를 출력할 때 쉼표를 이용해서 구분해야 한다.
+ **사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`을 발생시킨 후 애플리케이션은 종료되어야 한다.**
  + 잘못된 입력값이 존재한다.

---

## 🚗 프로그램 진행

1. 입력
   1. 자동차 입력 안내 메시지 출력
   2. 자동차 이름 문자열 입력 받기
   3. 시도할 횟수 입력 안내 메시지 출력
   4. 시도할 횟수 문자열 입력 받기
2. 문자열 변환
   1. 자동차 이름 문자열을 자동차 이름 리스트로 변환
      1. 자동차 이름 검증 (자동차 이름의 길이가 5 이상일 경우)
   2. 시도할 횟수를 숫자로 변환
      1. 시도할 횟수 검증 (오버플로우를 발생시키는 입력 값)
3. 차고 생성
   1. 자동차 객체를 담을 리스트 생성
   2. 자동차 이름 리스트를 입력 받기
   3. 자동차 이름 리스트를 기반으로 자동차 객체를 담을 리스트에 추가
      1. 자동차 객체 생성
         1. 자동차 이름 주입
         2. 거리 0 으로 초기화
4. 경주 트랙 생성
   1. 자동차 객체 리스트를 입력 받기
   2. 시도할 횟수를 입력 받기
   3. 시도할 횟수 `(lap)` 만큼 레이스
      1. 자동차 객체 리스트를 돌면서 각 자동차의 위치 상태를 변화시킨다.
         1. `4~9` 범위의 값이 나오면 전진. 
            1. 자동차 객체의 위치 값에 1을 더한다.
         2. `0~3` 범위의 값이 나오면 그대로
            1. 자동차 객체의 위치 값에 0을 더한다.
      2. 자동차 객체들의 이름과 현재의 위치를 특정한 형식에 맞춰 출력한다.
         1. 자동차 이름
         2. `:` 구분자
         3. 위치
            1. 자동차 객체 위치 값 만큼 이동거리 문자를 합쳐서 출력
               1. `-` 이동 거리 표시 문자
   4. 경기를 마친 자동차 객체 리스트를 차고 객체에 넣는다.
5. 우승자 검증
   1. 우승자 이름 리스트를 생성한다.
   2. 차고 객체에서 자동차 객체 리스트를 가져와 가장 멀리 간 자동차의 위치 값을 찾는다.
   3. 자동차 객체 리스트에서 가장 멀리간 위치 값과 동일한 위치 값을 가진 자동차를 찾는다.
   4. 우승자 이름 리스트에 저장한다.
6. 우승자 발표
   1. 우승자 리스트를 입력 받는다.
      1. 우승자가 한 명일 경우 (우승자 리스트의 길이가 1)
         1. 우승자의 이름만 출력
      2. 우승자가 한 명 이상일 경우
         1. 우승자들의 이름을 `,  + (공백)` 으로 구분

---

# 🛠️ 기능 목록

## 🕹️ controller

### Config
- [ ] 각 컨트롤러에서 사용할 값을 지정한다.
- [ ] 지정된 변수 값을 반환한다.

### RacingController
- [ ] 새로운 Registration 을 생성한다.
- [ ] 새로운 Race 를 생성한다.
- [ ] Race 를 진행한다.

### ScreenController
- [ ] RelayServer 에서 전달된 Map 값을 ScoreBoard 로 전달한다.
- [ ] ScoreBoard 에서 전달된 값을 출력한다.
- [ ] WinnerService 에서 전달된 우승 자동차 객체 리스트를 RaceWinner 에 전달한다.
- [ ] RaceWinner 에 전달된 값을 출력한다.

### InputController 
- [ ] Users 를 통해 자동차 이름 문자열을 입력 받는다.
  - [ ] 예외 검증
- [ ] Users 를 통해 시도할 횟수 문자열을 입력 받는다.
  - [ ] 예외 검증
- [ ] 검증된 자동차 이름 문자열을 반환한다.
- [ ] 검증된 시도할 횟수 문자열을 반환한다.

### TotalController 
- [ ] 새로운 config 를 생성한다.
- [ ] InputController 를 통해 입력받은 값들을 Config 에 전달한다.
- [ ] RacingController 로 Config 값들을 가지고 경기를 진행한다.
- [ ] ScreenController 로 Config 값들을 가지고 경기 내용을 출력한다.

## 🛖 domain

---
### Car
- [ ] 생성 시 이름과 위치 값을 설정한다.
- [ ] 이동한다. (위치 값을 변화시킨다.)
- [ ] 이름을 반환한다.
- [ ] 위치 값을 반환한다.

### CarGarage
- [ ] 생성 시, 경주에 참여하는 자동차 객체 리스트를 새로 생성한다.
- [ ] 생성 시, 자동차 이름 리스트를 입력 받는다.
- [ ] 경주에 참여하는 자동차 객체를 생성하고 입력받은 이름을 설정한다.
- [ ] 입력 받은 자동차 이름 리스트의 모든 값으로 경주 참여 자동차 객체 리스트를 완성한다.
- [ ] 완성된 경주 참여 자동차 객체 리스트를 반환한다.

### Race
- [ ] 생성 시, 경주 참여 자동차 객체 리스트를 입력 받는다.
- [ ] 생성 시, 시도할 횟수를 입력 받는다.
- [ ] 시도할 횟수 만큼 Lap 을 진행한다.
- [ ] Lap 을 진행하고 반환된 자동차 객체 리스트를 자동차 객체 리스트에 업데이트 한다.

### Lap
- [ ] 경주 참여 자동차 객체 리스트를 입력 받는다.
- [ ] 자동차 객체의 위치 상태를 변화시킨다.
- [ ] 위치를 전부 변화시킨 경주 참여 자동차 객체 리스트를 반환한다.

### winingCondition
- [ ] 경주를 마친 자동차 객체 리스트를 입력 받는다.
- [ ] 승리 조건을 세팅할 새로운 자동차 객체를 하나 만든다.
- [ ] 자동차 객체 리스트를 돌며 가장 큰 위치 값을 찾는다.
- [ ] 가장 큰 위치 값을 승리 조건을 담을 자동차 객체에 담는다.
- [ ] 승리 조건을 만족시키는 자동차 객체를 반환한다.

## 🤵‍♂️service

--- 
### RaceArenaService
- [ ] 새 Race 객체를 생성한다.
- [ ] CarGarage 에서 경주 참여 자동차 객체 리스트를 Race 객체에 전달한다.
- [ ] Race 를 진행한다.
  - [ ] 새 Lap 을 생성하고 진행시킨다.
  - [ ] RelayServer 에 Lap 을 진행한 자동차 객체 리스트를 전달한다.

### WinnerService
- [ ] 자동차 객체 리스트를 입력 받는다.
- [ ] 승리 조건이 담긴 자동차 객체를 입력 받는다.
- [ ] 자동차 객체 리스트에서 승리 조건에 맞는 자동차 이름을 추출해 리스트로 만든다.
- [ ] 우승 자동차 객체 리스트를 반환한다.

### RelayServer
- [ ] 자동차 객체 리스트를 입력받는다.
- [ ] Lap 진행 후 반환 받은 자동차 객체를 Map 형태로 변환시킨다.
  - [ ] 자동차 이름
  - [ ] 자동차 이동거리
- [ ] 변환시킨 Map 을 반환한다.

### VisualizeStatus 
- [ ] 자동차 이름 / 이동거리 Map 을 입력받는다.
- [ ] 이동거리(Long) 만큼 이동거리 기호(`-`)를 반복하는 문자열을 만든다.
- [ ] 자동차 이름 / 이동거리(문자열) Map 을 리턴한다. 

### Registration
- [ ] 입력 받은 자동차 이름 문자열을 리스트로 나눈다.
- [ ] CarGarage 에 자동차 이름 리스트를 전달한다.
- [ ] 입력 받은 시도할 횟수를 Long 으로 변환한다.
- [ ] 입력 받은 시도할 횟수를 Race 에 전달한다.

### Validation
- [ ] 잘못된 자동차 이름 입력하는 경우 (5자 초과)
- [ ] 자동차 이름이 중복되는 경우
- [ ] 자동차 이름이 공백일 경우
- [ ] 자동차 이름 입력이 공백일 경우
- [ ] 시도할 횟수 입력에 문자열이 포함된 경우
  - [ ] [0-9] 
  - [ ] 시도할 횟수가 음수인 경우( `-` 포함)
- [ ] 시도할 횟수 입력이 오버플로우를 발생시킬 경우
- [ ] 시도할 횟수가 0 인 경우
- [ ] 시도할 횟수가 공백인 경우

## 👀view

---
### User
- [ ] 입력 안내 문구 출력한다.
- [ ] 사용자의 입력을 받아 문자열을 반환한다.

### ScoreBoard
- [ ] 자동차 이름 리스트를 입력 받는다.
- [ ] 자동차 이름 / 자동차 위치 Map 을 입력 받는다.
- [ ] 자동차 이름 리스트를 돌며 모든 이름 값들에 대한 포맷을 맞춘 문자열을 반환한다. 
- [ ] 정해진 포맷을 출력한다.
  - [ ] 자동차 이름
  - [ ] 구분자 `:`
  - [ ] 이동거리(변환된 문자열)

### RaceWinner
- [ ] 우승 자동차 리스트를 입력 받는다.
- [ ] 우승 자동차 리스트를 형식에 맞는 문자열로 변환해 반환한다.
- [ ] 우승 자동차 리스트를 문자열로 합친다.
  - [ ] 우승 자동차 리스트에 남은 우승 자동차가 한 대일 경우
    - [ ] 최종 우승자
    - [ ] 구분자 `:`
    - [ ] 자동차 이름 
  - [ ] 우승 자동차 리스트에 남은 우승 자동차가 두 대 이상일 경우
    - [ ] 최종 우승자
    - [ ] 구분자 `:`
    - [ ] 자동차 이름 
    - [ ] `,`